{"version":3,"sources":["webpack:///./src/views/Books/books.page.js","webpack:///./src/components/Page.js"],"names":["useStyles","makeStyles","theme","_acordinBlock","mainBlock","_defineProperty","display","flexDirection","breakpoints","up","acordinBlock","width","height","down","accordionContent","fontWeight","BooksPage","panel","customStyles","params","useParams","books","useSelector","state","dispatch","useDispatch","navigate","useNavigate","_useImmer2","_slicedToArray","useImmer","category","character","price","bookFilters","updateBookFilters","_useState2","useState","expanded","setExpanded","_useState4","loadingSpin","setLoadingSpin","categorybooks","filter","book","handleFetchFilterbooks","data","payload","privateApiPOST","Api","then","response","status","console","log","setBooks","concat","error","handleCategoryFilterClick","draft","privateApiGET","React","createElement","Page","title","Container","maxWidth","Typography","variant","alignItems","marginTop","bordertop","className","Accordion","onChange","event","isExpanded","sx","backgroundColor","AccordionSummary","expandIcon","ExpandMoreIcon","id","AccordionDetails","List","ListItem","key","disablePadding","ListItemButton","onClick","ListItemText","primary","map","item","index","toLowerCase","toUpperCase","container","length","Grid","spacing","mt","xs","md","BookCard","forwardRef","_ref","ref","children","_ref$title","rest","_objectWithoutProperties","_excluded","_extends","Helmet","propTypes","PropTypes","node","isRequired","string"],"mappings":"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","file":"books.page.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useImmer } from \"use-immer\";\nimport Page from \"../../components/Page\";\nimport BookCard from \"../../components/Card\";\nimport { Grid, Container, Typography } from \"@mui/material\";\n\nimport { privateApiGET, privateApiPOST } from \"../../components/PrivateRoute\";\nimport Api from \"../../components/Api\";\n\nimport { makeStyles } from \"@mui/styles\";\n\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemButton from \"@mui/material/ListItemButton\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setBooks } from \"../../redux/bookStore/booksSlice\";\nimport { useParams, useNavigate } from \"react-router-dom\";\n\nexport const useStyles = makeStyles((theme) => ({\n  mainBlock: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    [theme.breakpoints.up(\"md\")]: {\n      flexDirection: \"row\",\n    },\n  },\n  acordinBlock: {\n    width: \"30%\",\n    height: \"auto\",\n    [theme.breakpoints.down(\"md\")]: {\n      width: \"50%\",\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\",\n    },\n  },\n  accordionContent: {\n    \"&.MuiListItemText-primary\": {\n      fontWeight: \"700\",\n    },\n  },\n}));\n\nconst BooksPage = () => {\n  const customStyles = useStyles();\n  const params = useParams();\n  const books = useSelector((state) => state.books.books);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [bookFilters, updateBookFilters] = useImmer({\n    category: params.category,\n    character: \"\",\n    price: \"\",\n  });\n  const [expanded, setExpanded] = useState(false);\n  const [loadingSpin, setLoadingSpin] = useState(false);\n\n  const categorybooks = books.filter(\n    (book) => book.category === params.category\n  );\n\n  const categoriesList = [\"fiction\", \"sci-fi\", \"comedy\"];\n\n  const handleFetchbooks = () => {\n    setLoadingSpin(true);\n    privateApiGET(Api.books)\n      .then((response) => {\n        const { status, data } = response;\n        if (status === 200) {\n          console.log(\"data\", data);\n          dispatch(setBooks(data?.data));\n          setLoadingSpin(false);\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error\", error);\n        setLoadingSpin(false);\n        if (error.response.status === 401) {\n          navigate(\"/login\");\n        }\n      });\n  };\n\n  const handleFetchFilterbooks = (data) => {\n    setLoadingSpin(true);\n    let payload = data;\n    privateApiPOST(Api.books, payload)\n      .then((response) => {\n        const { status, data } = response;\n        if (status === 200) {\n          console.log(\"data\", data);\n          dispatch(setBooks(data?.data));\n          setLoadingSpin(false);\n          if (\n            payload &&\n            \"category\" in payload &&\n            params.payload != payload[\"category\"]\n          ) {\n            navigate(`/app/books/categories/${payload[\"category\"]}`);\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error\", error);\n        setLoadingSpin(false);\n        if (error.response.status === 401) {\n          navigate(\"/login\");\n        }\n      });\n  };\n\n  const handleAccordionChange = (panel) => (event, isExpanded) => {\n    setExpanded(isExpanded ? panel : false);\n  };\n\n  const handleCategoryFilterClick = (category) => {\n    if (bookFilters[\"category\"] === category) {\n      updateBookFilters((draft) => {\n        draft.category = \"\";\n      });\n      handleFetchbooks();\n      navigate(\"/app/books\");\n    } else if (category === \"all\") {\n      updateBookFilters((draft) => {\n        draft.category = \"\";\n      });\n      handleFetchFilterbooks();\n      navigate(\"/app/books\");\n    } else {\n      updateBookFilters((draft) => {\n        draft.category = category;\n      });\n      let data = {\n        category: category,\n        // price: productFilters[\"price\"],\n        // character: productFilters[\"character\"],\n      };\n      handleFetchFilterbooks(data);\n    }\n  };\n\n  return (\n    <Page title=\"books\">\n      <Container maxWidth=\"lg\">\n        <Typography variant=\"h1\" alignItems=\"left\" marginTop=\"36px\">\n          Books\n        </Typography>\n        <hr bordertop=\"2px solid black\" fontWeight=\"bold\"></hr>\n      </Container>\n      <Container maxWidth=\"lg\" className={customStyles.mainBlock}>\n        <Container className={customStyles.acordinBlock}>\n          <Accordion\n            expanded={expanded === \"panel2a\"}\n            onChange={handleAccordionChange(\"panel2a\")}\n            sx={{\n              \"&. MuiListItem-button\": {\n                backgroundColor: \"red !important\",\n              },\n            }}\n          >\n            <AccordionSummary\n              expandIcon={<ExpandMoreIcon />}\n              aria-controls=\"panel2a-content\"\n              id=\"panel2a-header\"\n            >\n              <Typography>CATEGORY</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <List>\n                <ListItem key=\"all\" disablePadding>\n                  <ListItemButton\n                    onClick={() => handleCategoryFilterClick(\"all\")}\n                  >\n                    <ListItemText primary=\"ALL\" />\n                  </ListItemButton>\n                </ListItem>\n                {categoriesList.map((item, index) => (\n                  <ListItem key={index} disablePadding>\n                    <ListItemButton\n                      onClick={() =>\n                        handleCategoryFilterClick(item.toLowerCase())\n                      }\n                    >\n                      <ListItemText primary={item.toUpperCase()} />\n                    </ListItemButton>\n                  </ListItem>\n                ))}\n              </List>\n            </AccordionDetails>\n          </Accordion>\n        </Container>\n        <Container maxWidth=\"md\" className={customStyles.container}>\n          {params.category && books.length > 0 && !loadingSpin ? (\n            <Grid container spacing={2} mt={2}>\n              {categorybooks.map((book, id) => {\n                return (\n                  <Grid item key={id} xs={6} md={4}>\n                    <BookCard key={id} book={book} />\n                  </Grid>\n                );\n              })}\n            </Grid>\n          ) : !params.category && books.length > 0 && !loadingSpin ? (\n            <Grid container spacing={2} mt={2}>\n              {books.map((book, id) => {\n                return (\n                  <Grid item key={id} xs={6} md={4}>\n                    <BookCard key={id} book={book} />\n                  </Grid>\n                );\n              })}\n            </Grid>\n          ) : (\n            \"\"\n          )}\n        </Container>\n      </Container>\n    </Page>\n  );\n};\n\nexport default BooksPage;\n","import React, { forwardRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport PropTypes from \"prop-types\";\n\nconst Page = forwardRef(({ children, title = \"\", ...rest }, ref) => {\n  return (\n    <div ref={ref} {...rest}>\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      {children}\n    </div>\n  );\n});\n\nPage.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string,\n};\n\nexport default Page;\n"],"sourceRoot":""}